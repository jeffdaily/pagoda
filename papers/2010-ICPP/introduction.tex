\section{Introduction}
\label{section:introduction}

Parallel programming is needed to surmount the size of output data produced by
today's climate models.\cite{MODSIM07:LOT}  A single snapshot of Randall's
Global Cloud Resolving Model will produce terabytes of data.\cite{GCRM}  For
these data sizes, I/O bandwidth represents the single greatest bottleneck for
analysis tools.  Parallel software leveraging parallel file systems must be
used to process this data, however current climate analysis tools are at most
task parallel and rely on a single data reader.\cite{CDAT}\cite{CDO}\cite{NCO}

Many climate analysis tools robustly handle the manipulation and display of
regularly gridded data.  However, these same applciations lack sufficient
features when handling unstructured or irregular grids such as the GCRM or
cubed sphere models\cite{CUBE}.  Unstructured grids are gaining popularity,
further widening the gap between current software and these types of models.

Subsetting is a fundamental capability for any analysis tool and allows users
to operate over the regions of the data with which they are interested. The
subsetting operation is useful as part of a larger operation over the data,
such as for regional averages, but is also useful to post-process data into a
new dataset such that the cost of subsetting can be amortized across future
operations over the same region. Further, as the size of datasets grow
subsetting is important to reduce the data to a size that traditional analysis
tools are capable of handling. 

The GCRM data poses an additional problem due to its use of an unstructured
grid.  Regular grids allow for the topology to be implicitly defined by how
the data is stored; coordinate variables are generally monotonic and cell
neighbors are adjacent both logically and in memory. These assumptions allow
for operations over regular grids which are otherwise more difficult to
perform over unstructured grids. In the case of partitioning these grids for
data parallel processing, unstructured grids will often have more of the
logically adjacent cells scattered across memory partitions than in the
regular case.  When subsetting these unstructured grids, the explicitly
defined topology must also be preserved.

In this paper, we present a parallel tool for subsetting very large geodesic
climate data.  Simliar to the interface of the NetCDF Operators's\cite{NCO}
ncks program, we have developed a tool for subsetting the GCRM data but it
does so in parallel and also preserves the explicit topology.  The code is
built using the Global Arrays (GA) toolkit which provides an efficient and
portable "shared-memory" programming interface for distributed-memory
computers.\cite{GA}  Further, GA is built on top of the Aggregate Remote
Memeory Copy Interface (ARMCI)\cite{ARMCI} which allows for truly one-sided
communication across nodes.  GA traditionally deals with dense arrays, however
its sparse matrix operations as well as its one-sided operations allow for
efficient subsetting over unstructured grids.  For efficient I/O, the
subsetter relies on Parallel NetCDF.

Section \ref{section:design} describes the requirements and the capabilities
of the subsetter and how GA's unique features were leveraged.  Section
\ref{section:results} presents our experimental design and the performance
characteristics of the subsetter on nearly full-scale data set sizes.  We
present the capabilities under development in section \ref{section:future}.
Finally, section \ref{section:conclusion} presents our conclusions.
